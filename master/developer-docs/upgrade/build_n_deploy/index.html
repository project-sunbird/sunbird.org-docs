<!DOCTYPE html>
<html>
	<head>
	<base id="baseURL" href="/master/" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=10, user-scalable=yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-touch-fullscreen" content="yes" />
<link rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16">
<meta name="msapplication-TileColor" content="#65d3f7">
<meta name="msapplication-TileImage" content="/img/favicon/mstile-150x150.png">

<title>Build and Deploy</title>
<meta name="description" content="Build and Deploy"/>

<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-store" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="last-modified" content="2021-04-18 16:34:40 +0530">
<meta http-equiv="Expires" content="600" />

<!--Build Details-->
<meta name="buildVersion" content="" />
<meta name="buildNo" content="3273" />
<meta name="version" id="docsVersion" content="master" />
<!--/Build Details-->


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,600,700" >
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" >
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?18042021"  />

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js?18042021"></script>
<script type="text/javascript" src="/js/jquery.tocLight.js?18042021"></script>
<script type="text/javascript" src="/js/jquery.elevateZoom-3.0.8.min.js?18042021"></script>
<script type="text/javascript" src="/js/handlebars-v4.0.11.js?18042021"></script>
<script type="text/javascript" src="/js/widgets-data.js?18042021"></script>
<script type="text/javascript" src="/js/widgets.js?18042021"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106552125-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-106552125-1');
</script>
<script>
function resetBase(){
	currentURLArray = window.location.pathname.split( '/' );
    secondLevelLocation = currentURLArray[1];
    if (secondLevelLocation == 'latest'){
		baseURL = document.getElementById('baseURL');
		baseURL.href="/latest/";
	}
}
resetBase();
</script>

	
		<meta name="robots" content="index, follow">
	
  </head>
  <body id="body" class="doc-layout">
  <div class="container inner container-height docs">
    <header class="logo-container">
      <div class="logo">
        <a href="https://www.sunbird.org" target="_blank">
          <img src="/img/sunbird-logo.png" alt="Sunbird" title="Sunbird">
        </a>
      </div>
      <button type="button" class="dropdown-toggle collapsed" id="dropdown-trigger" data-toggle="collapse" data-target="#mobile-dropdown" aria-expanded="false">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </button>
    </header>
    <nav class="sidebar-container" id="mobile-dropdown">
      <div class="inner__sidebar">
        

<div id="" class="sidebar-cover">
	
	 <div class="search-cover">
	<form method="get" action="https://www.google.com/search" target="_blank">
		<input type="text" value="" name="q" placeholder="Search"/ class="search-input" title="Enter keyword to search">
		<input type="hidden" value="en" name="hl" />
		<input type="hidden" name="sitesearch" value="http://docs.sunbird.org" />
		<input type="hidden" value="lang_en" name="lr" />
		<button type="submit" onclick="submit()" class="search-btn" title="Search">
			<i class="fa fa-search"></i>
		</button>
	</form>
</div>
 
	<div id="widgetVersionSwitcher"></div>
	
	<div class="sidebar-wrapper developer-docs"> 
		
			
				
				
				<div class="active">
					<a href="developer-docs/" >
						<h4 class="sidebar-group-title">Developer Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/server-installation/" 
										 
										class="" 
										> 
										Server Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/server-installation/prerequisites/" 
												
												class="" 
												>
												Prerequisites
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/load_balancer_setup/" 
												
												class="" 
												>
												Load Balancer Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/ansible-variables/" 
												
												class="" 
												>
												Ansible Variables Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/jenkins-setup/" 
												
												class="" 
												>
												Jenkins Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/understanding-jenkins-scripts-jobs-parameters-and-variables/" 
												
												class="" 
												>
												Understanding Jenkins Scripts
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/running-build-artifact-uploads-and-deployments/" 
												
												class="" 
												>
												Running Builds, Artifact Uploads and Deployments
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-installation/artifactupload-job/" 
															
															class="" 
															>
															Artifact Upload Jobs
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/knowledge-platform/" 
															
															class="" 
															>
															Knowledge Platform
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/data-pipeline/" 
															
															class="" 
															>
															Data Pipeline
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/core-services/" 
															
															class="" 
															>
															Core Services
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/plugins/" 
															
															class="" 
															>
															Plugins
														</a>
													</li>
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/jenkins-tweaks/" 
												
												class="" 
												>
												Jenkins Tweaks
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/keycloak_user_federation/" 
												
												class="" 
												>
												Keycloak User Federation
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/post_installation_configuration/" 
												
												class="" 
												>
												Post Installation Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/server-configurations/" 
										 
										class="" 
										> 
										Server Configurations
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_portal/" 
												
												class="" 
												>
												Portal Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_content_service/" 
												
												class="" 
												>
												Content Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/configuring_domain_ext_links/" 
															
															class="" 
															>
															Import External Content
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/content_filtering/" 
															
															class="" 
															>
															Content Filtering
														</a>
													</li>
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/system_settings/" 
												
												class="" 
												>
												System Settings
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/configuring_email_notification/" 
												
												class="" 
												>
												Email Notification Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/content_checklist_configuration/" 
												
												class="" 
												>
												Reviewer Checklist
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/metadata_driven_forms/" 
												
												class="" 
												>
												Metaforms Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_lms/" 
												
												class="" 
												>
												LMS Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/sso_otpsms/" 
															
															class="" 
															>
															OTP based SMS Configuration
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/keycloak_admin_config_settings/" 
															
															class="" 
															>
															Keycloak Admin Configuration
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/developer-installation/" 
										 
										class="" 
										> 
										Developer Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/developer-installation/install_sbportal" 
												
												class="" 
												>
												Portal
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/mobile-app-installation/" 
										 
										class="" 
										> 
										Mobile App Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/mobile-app-installation/mobile_app_forms" 
												
												class="" 
												>
												Mobile App forms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/upgrade/" 
										 
										class="" 
										> 
										Upgrading Sunbird
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/upgrade/jenkins_updates/" 
												
												class="" 
												>
												Update Jenkins
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/upgrade/update_ansible_variables/" 
												
												class="" 
												>
												Update Ansible Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/upgrade/build_n_deploy/" 
												
												class="" 
												>
												Build and Deploy
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/onboarding/" 
										 
										class="" 
										> 
										Onboarding
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/singlesignon/org_user_creation_sso/" 
												
												class="" 
												>
												Creating Organizations and Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="features-documentation/badging_framework/creating_badges/" 
												
												class="" 
												>
												Creating Badges
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="features-documentation/badging_framework/badges_users/" 
												
												class="" 
												>
												Issuing Badges to Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/configuring_sunbird/configuring_announcement/" 
												
												class="" 
												>
												Creating Announcements
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/how-to-guide/overview_howto/" 
										 
										class="" 
										> 
										How-To-Guides
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_framework_in_sunbird/" 
												
												class="" 
												>
												Creating Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_seeddata_in_framework/" 
												
												class="" 
												>
												Adding Content to Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_organization/" 
												
												class="" 
												>
												Creating Organizations
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_user/" 
												
												class="" 
												>
												Creating Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_org_add_user/" 
												
												class="" 
												>
												Adding User to Organization
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_course_using_api/" 
												
												class="" 
												>
												Creating Course
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_upload_existing_content/" 
												
												class="" 
												>
												Uploading Content
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_badge/" 
												
												class="" 
												>
												Creating Badges
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/metadata_driven_forms" 
												
												class="" 
												>
												Configuring Metaforms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/link_dial_code_to_a_book" 
												
												class="" 
												>
												Linking DIAL Code
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/telemetry_data_consumption" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/sync_telemetry_data_captured_from_offline_devices" 
												
												class="" 
												>
												Syncing Telemetry Data
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/telemetry/overview/" 
										 
										class="" 
										> 
										Telemetry
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/specification/" 
												
												class="" 
												>
												Telemetry Specifications
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/sending_telemetry/" 
												
												class="" 
												>
												Sending Telemetry
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/consuming_telemetry/" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#mobile-app-workflow" 
															
															class="" 
															>
															Mobile App Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#web-portal-workflow" 
															
															class="" 
															>
															Web Portal Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#content-editor-workflow" 
															
															class="" 
															>
															Content Editor Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#backend-services-workflow" 
															
															class="" 
															>
															Backend-services Workflow
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/library_reference/" 
										 
										class="" 
										> 
										Library References
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/jslibrary/" 
												
												class="" 
												>
												Standalone JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/htmlinterfacelibrary/" 
												
												class="" 
												>
												HTML Interface Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/authtokengenerator_jslibrary/" 
												
												class="" 
												>
												AuthToken Generator JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								
								<a 
									href="developer-docs/troubleshooting/" 
									
									class="" 
									>
									Troubleshooting
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="apis/" >
						<h4 class="sidebar-group-title">API Reference Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="apis/#content--learning-services" 
									
									class="" 
									>
									Content & Learning Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#contribution--curation-services" 
									
									class="" 
									>
									Contribution & Curation Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#taxonomy--tagging-services" 
									
									class="" 
									>
									Taxonomy & Tagging Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#telemetry--data-analytics-services" 
									
									class="" 
									>
									Telemetry & Data Analytics Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#registry--discovery-services" 
									
									class="" 
									>
									Registry & Discovery Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#interaction--collaboration-services" 
									
									class="" 
									>
									Interaction & Collaboration Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#practice-sensing--assessment-services" 
									
									class="" 
									>
									Practice, Sensing & Assessment Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#credentialing--badging-services" 
									
									class="" 
									>
									Credentialing & Badging Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#infra--shared-services" 
									
									class="" 
									>
									Infra & Shared Services
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="faqs/" >
						<h4 class="sidebar-group-title">Frequently asked questions</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="faqs/audience/" 
									
									class="" 
									>
									Audience
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_format/" 
									
									class="" 
									>
									Content Format
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_repo/" 
									
									class="" 
									>
									Content Repositories
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/contentreviews/" 
									
									class="" 
									>
									Content Review
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_types/" 
									
									class="" 
									>
									Content Types
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_upload/" 
									
									class="" 
									>
									Content Upload
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/feature/" 
									
									class="" 
									>
									Features
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/fixerrors/" 
									
									class="" 
									>
									Fix Errors
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/helpsupport/" 
									
									class="" 
									>
									Help Support
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/intellectual_propertylicensesstandards/" 
									
									class="" 
									>
									Intellectual Property Licenses Standards
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/registrationenrolment/" 
									
									class="" 
									>
									Registration and Enrollment
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/signin/" 
									
									class="" 
									>
									Sign In
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/taxonomymetadataframework/" 
									
									class="" 
									>
									Taxonomy Metadata Framework
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/user_rightspermissions/" 
									
									class="" 
									>
									Users Rights and Permission
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="glossary/" >
						<h4 class="sidebar-group-title">Glossary</h4>
					</a>
					
				</div>
				
		
	</div>
</div>

<script>
	$("a[href$='developer-docs/upgrade/build_n_deploy/']").addClass("sidebar-link-selected");
</script>

      </div>
    </nav>
    <div class="content">
      <div class="inner__content header" id="heading">
        <h1>Build and Deploy </h1>
      </div>

      <div id="main-content" class="inner__content">
			<p class="edit-para text-right">
				<span>
			<!--<a target="_blank" class="contribute" href="/contributions/contribution_guidelines/">
				  <i class="fa fa-book" aria-hidden="true"></i> <i>Contribution Guidelines</i>
			  </a> &nbsp;&nbsp;-->
			  
			 <a target="_blank"  title="Edit this page"class="" href="https://github.com/project-sunbird/sunbird.org-docs/edit/master/developer-docs/upgrade/build_n_deploy.md">
				  <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit
			  </a> 
			  | 
			  <a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				  <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
				  Report
			  </a>
			  </span>
			</p>
			<div class="widgetLatestVersionNotification"></div>
          <div id="toc-container">
  <table class="toc" id="toc">
    <tbody>
      <tr>
        <td>
          <div id="toctitle">
            <h2>Contents</h2>
            <span class="toctoggle">[<a id="toctogglelink" class="internal" href="#">hide</a>]</span>
          </div>
          <ul>
            <li class="toc_level-1 toc_section-1">
              <a href="#overview"><span class="tocnumber">1 .</span> <span class="toctext">Overview</span></a>
              <ul>
                <li class="toc_level-2 toc_section-2">
                  <a href="#variables"><span class="tocnumber">1.1 .</span> <span class="toctext">Variables</span></a>
                </li>
                <li class="toc_level-2 toc_section-3">
                  <a href="#build-and-deploy"><span class="tocnumber">1.2 .</span> <span class="toctext">Build and Deploy</span></a>
                </li>
                <li class="toc_level-2 toc_section-4">
                  <a href="#manual-configurations"><span class="tocnumber">1.3 .</span> <span class="toctext">Manual Configurations</span></a>
                </li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div><h2 id="overview">Overview</h2>

<p>This page details out the jobs required to be run as part of the upgrade from Sunbird release 3.7.0 to release 3.8.0. Use the following table to understand the jobs that need to be executed in order to successfully complete the upgrade. Any jenkins job configuration or pre-requisites mentioned under manual configuration section needs to be done first before running any of the mentioned jobs. The order of the jobs should also be run as shown below. They can be run in parallel to speed up the execution.</p>

<h3 id="variables">Variables</h3>

<table>
  <thead>
    <tr>
      <th>Variable Name</th>
      <th>Service Name</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>sunbird_portal_offline_supported_languages</td>
      <td>Player Service</td>
      <td>This variable should be removed from private <code>Core/common.yml</code> if defined</td>
    </tr>
    <tr>
      <td>adminutil_refresh_token_secret_key</td>
      <td>Adminutils</td>
      <td>- Go to http://KEYCLOAK_IP:8080/auth/admin/master/console/#/realms/sunbird/keys<br /> - Get this secret value from DB, by loging into the keycloak 7 postgres DB and run the query: <code>SELECT value FROM component_config CC INNER JOIN component C ON(CC.component_id = C.id) WHERE C.realm_id = 'sunbird' and provider_id = 'hmac-generated' AND CC.name = 'secret';</code><br /> - <a href="https://project-sunbird.atlassian.net/wiki/spaces/DevOps/pages/2281734145/Keycloak+Upgrade+from+3.2.0+to+7.0.1">More details with pictures are here</a><br /> - This was done as part of release-3.7.0 hotfix and is not required if you are already on Keycloak 7</td>
    </tr>
    <tr>
      <td>kp_schema_base_path</td>
      <td>Flink Job</td>
      <td>- This variable should be added in private repo under <code>Core/common.yml</code> and <code>KnowledgePlatform/common.yml</code><br /> - <code>kp_schema_base_path: "{{proto}}://{{sunbird_public_storage_account_name}}.blob.core.windows.net/{{plugin_container_name}}/schemas/local"</code></td>
    </tr>
  </tbody>
</table>

<h3 id="build-and-deploy">Build and Deploy</h3>

<table>
  <thead>
    <tr>
      <th>Service to be Build</th>
      <th>Build Tag</th>
      <th>Service to Deploy</th>
      <th>Deploy Tag</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> </td>
      <td> </td>
      <td>Provision/Core/Keycloak</td>
      <td>release-3.8.0_RC9</td>
      <td>This was done as part of release-3.7.0 hotfix and is not required if you are already on Keycloak 7</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Provision/DataPipeline/AnalyticsSpark</td>
      <td>release-3.8.0_RC6</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>OpsAdministration/Core/ESMapping</td>
      <td>release-3.8.0_RC9</td>
      <td>Choose <code>userv1,orgv2</code> for jenkins job parameter <code>indices_name</code></td>
    </tr>
    <tr>
      <td>Build/Core/Cassandra</td>
      <td>release-3.8.0_RC2</td>
      <td>Deploy/Kubernetes/Cassandra</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/Kubernetes/UploadSchemas</td>
      <td>release-3.8.0_RC9</td>
      <td>Provide value as <code>release-3.8.0_RC6</code> for the jenkins job paramater <code>kp_branch_or_tag</code></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/Kubernetes/APIManager</td>
      <td>release-3.8.0_RC9</td>
      <td>- You should see annotations in APIManager pods as <code>fluentbit.io/parser: kong</code></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/Kubernetes/OnboardAPIs</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/Kubernetes/OnboardConsumers</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/KnowledgePlatform/KafkaSetup</td>
      <td>release-3.8.0_RC10</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/KnowledgePlatform/Neo4jDefinitionUpdate</td>
      <td>release-3.8.0_RC10</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/AdminUtils</td>
      <td>release-3.7.0_RC1</td>
      <td>Deploy/Kubernetes/AdminUtils</td>
      <td>release-3.8.0_RC9</td>
      <td>This was done as part of release-3.7.0 hotfix and is not required if you are already on Keycloak 7</td>
    </tr>
    <tr>
      <td>Build/Core/Analytics</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/Kubernetes/Analytics</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Assessment</td>
      <td>release-3.8.0_RC6</td>
      <td>Deploy/Kubernetes/Assessment</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Bot</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/Kubernetes/Bot</td>
      <td>release-3.8.0_RC1</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Content</td>
      <td>release-3.8.0_RC6</td>
      <td>Deploy/Kubernetes/Content</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/DiscussionsMW</td>
      <td>release-3.8.0_RC2</td>
      <td>Deploy/Kubernetes/DiscussionsMW</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Groups</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/Kubernetes/Groups</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Keycloak</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/Kubernetes/Keycloak</td>
      <td>release-3.8.0_RC9</td>
      <td>This was done as part of release-3.7.0 hotfix. In this release we have only changed telemetry pdata version, so only a redeploy is required if you are already on Keycloak 7</td>
    </tr>
    <tr>
      <td>Build/Core/KnowledgeMW</td>
      <td>release-3.8.0_RC3</td>
      <td>Deploy/Kubernetes/KnowledgeMW</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Learner</td>
      <td>release-3.8.0_RC27</td>
      <td>Deploy/Kubernetes/Learner</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Lms</td>
      <td>release-3.8.0_RC7</td>
      <td>Deploy/Kubernetes/Lms</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Nodebb</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/Kubernetes/Nodebb</td>
      <td>release-3.8.0_RC9</td>
      <td>Provide value as <code>v1.16.0</code> for the jenkins job parameter <code>nodebb_branch</code> in the build phase</td>
    </tr>
    <tr>
      <td>Build/Core/Player</td>
      <td>release-3.8.0_RC52</td>
      <td>Deploy/Kubernetes/Player</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Router</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/Kubernetes/Router</td>
      <td>release-3.8.0_RC1</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Search</td>
      <td>release-3.8.0_RC6</td>
      <td>Deploy/Kubernetes/Search</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/Core/Taxonomy</td>
      <td>release-3.8.0_RC6</td>
      <td>Deploy/Kubernetes/Taxonomy</td>
      <td>release-3.8.0_RC9</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/KnowledgePlatform/KnowledgePlatform</td>
      <td>release-3.8.0_RC10</td>
      <td>Deploy/KnowledgePlatform/Learning</td>
      <td>release-3.8.0_RC10</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/KnowledgePlatform/Yarn</td>
      <td>release-3.8.0_RC10</td>
      <td>Deploy/KnowledgePlatform/Yarn</td>
      <td>release-3.8.0_RC10</td>
      <td>Kill <code>course-batch-updater</code> samza job, delete its tar file and it’s extracted folder in the Yarn Master before deployment</td>
    </tr>
    <tr>
      <td>Build/KnowledgePlatform/FlinkJobs</td>
      <td>release-3.8.0_RC5</td>
      <td>Deploy/KnowledgePlatform/FlinkJobs</td>
      <td>release-3.8.0_RC10</td>
      <td>- Kill <code>composite-search-indexer</code> and <code>post-publish-processor</code> samza job before deployment<br />- Choose <code>enrolment-reconciliation</code> <code>post-publish-processor</code> <code>search-indexer</code> and <code>questionset-publish</code> for jenkins job parameter <code>job_names_to_deploy</code></td>
    </tr>
    <tr>
      <td>Build/DataPipeline/AnalyticsCore</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/DataPipeline/AnalyticsCore</td>
      <td>release-3.8.0_RC6</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/DataPipeline/CoreDataProducts</td>
      <td>release-3.8.0_RC1</td>
      <td>Deploy/DataPipeline/CoreDataProducts</td>
      <td>release-3.8.0_RC6</td>
      <td> </td>
    </tr>
    <tr>
      <td>Build/DataPipeline/ETLJobs</td>
      <td>release-3.8.0_RC4</td>
      <td>Deploy/DataPipeline/ETLJobs</td>
      <td>release-3.8.0_RC6</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/DataPipeline/ETLDruidContentIndexer</td>
      <td>release-3.8.0_RC6</td>
      <td>This job needs to be run after all the migrations mentioned in the manual configuration section</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/DataPipeline/ETLUserCacheIndexer</td>
      <td>release-3.8.0_RC6</td>
      <td>- Take the record count of index 12 from metadata redis before deploying<br />- Tail the logs using <code>tail -f /mount/data/analytics/content-snapshot/logs/&lt;today's-date&gt;-task-execution.log</code><br />- Deploy the job<br /> - Watchout for these keywords in the logs <code>Time taken for complete script</code> and <code>Time taken for indiviual steps</code><br />- This job needs to be run after all the migrations mentioned in the manual configuration section</td>
    </tr>
    <tr>
      <td>Build/DataPipeline/FlinkPipelineJobs</td>
      <td>release-3.8.0_RC4</td>
      <td>Deploy/DataPipeline/FlinkPipelineJobs</td>
      <td>release-3.8.0_RC6</td>
      <td>- Change Jenkinsfile path to <code>kubernetes/pipelines/deploy/flink-jobs/Jenkinsfile</code><br />- Choose <code>user-cache-updater-v2</code> for jenkins parameter <code>job_names_to_deploy</code><br />- This job needs to be run after all the migrations mentioned in the manual configuration section</td>
    </tr>
    <tr>
      <td>Build/DataPipeline/EdDataProducts</td>
      <td>release-3.8.0_RC6</td>
      <td>Deploy/DataPipeline/EdDataProducts</td>
      <td>release-3.8.0_RC6</td>
      <td>- The deploy jobs needs to be run two times<br />- Deploy using default jenkins job parameter values first time<br />- Type <code>cronjobs</code> for jenkins job paramater <code>module</code> in the second deployment to enable <code>course-batch-status-updater</code> cronjob to run every 30 minutes once<br />- This job needs to be run after all the migrations mentioned in the manual configuration section</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/Kubernetes/Monitoring</td>
      <td>release-3.8.0_RC9</td>
      <td>Choose <code>all</code> for jenkins job paramater <code>tag</code></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/Kubernetes/LoggingFileBeatsVM</td>
      <td>release-3.8.0_RC9</td>
      <td>Select all hosts for the jenkins job paramater <code>hosts</code> and choose <code>default</code> for the jenkins job paramater <code>tags</code></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/KnowledgePlatform/LoggingFileBeatsVM</td>
      <td>release-3.8.0_RC9</td>
      <td>Select all hosts for the jenkins job paramater <code>hosts</code> and choose <code>default</code> for the jenkins job paramater <code>tags</code></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/DataPipeline/LoggingFileBeatsVM</td>
      <td>release-3.8.0_RC9</td>
      <td>Select all hosts for the jenkins job paramater <code>hosts</code> and choose <code>default</code> for the jenkins job paramater <code>tags</code></td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Deploy/Kubernetes/Logging</td>
      <td>release-3.8.0_RC9</td>
      <td>- Choose <code>fluent-bit</code> for jenkins job paramater <code>chartname</code><br />- Go to Kibana -&gt; Management -&gt; Index Patterns -&gt; Click on <code>logstash-2</code> -&gt; Refresh<br />- Verify nginx and kong logs are being parsed using the below search queries<br />- <code>kubernetes_labels_app: "nginx-public-ingress" (you should see fields starting with n_)</code><br />- <code>kubernetes_labels_app: "apimanager" (you should see fields starting with k_)</code><br />- All <code>.</code> notation are replaced with <code>_</code> notation for search queries<br />- Old: <code>kubernetes.labels.app</code>, New: <code>kubernetes_labels_app</code></td>
    </tr>
  </tbody>
</table>

<h3 id="manual-configurations">Manual Configurations</h3>

<table>
  <thead>
    <tr>
      <th>Manual Step</th>
      <th>Instruction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Update jenkins job</td>
      <td>Refer <a href="https://github.com/project-sunbird/sunbird-devops/pull/2322">PR1</a> <a href="https://github.com/project-sunbird/sunbird-devops/pull/2407">PR2</a></td>
    </tr>
    <tr>
      <td>Delete old user index</td>
      <td><code>curl --location --request DELETE 'localhost:9200/user?pretty'</code></td>
    </tr>
    <tr>
      <td>ES Re-Indexing</td>
      <td>Run this after ESMapping job and before deploying Learner Service <a href="https://project-sunbird.atlassian.net/wiki/spaces/UM/pages/2346156058/SC-2190+ES+scaling+-+reindexing+Org+index">ES-Reindexing Steps</a></td>
    </tr>
    <tr>
      <td>Org and User Migrations</td>
      <td>Run this after deploying Learner Service <a href="https://project-sunbird.atlassian.net/wiki/spaces/UM/pages/2341339139/SC-2220+Data+Migration+on+Organisation+Table">Org Migration Script</a> <a href="https://project-sunbird.atlassian.net/wiki/spaces/UM/pages/2316271628/SC-2224+Migration+of+existing+data+to+the+new+columns+in+user+table">User Migration Script</a></td>
    </tr>
    <tr>
      <td>User and Org Sync</td>
      <td>Run this after Org and User Migrations Scripts <a href="https://project-sunbird.atlassian.net/wiki/spaces/UM/pages/2437480455/SC-2190+sync+tool+for+learner-service">Script Link</a></td>
    </tr>
    <tr>
      <td>Update the forms</td>
      <td>Jira Links - <a href="https://project-sunbird.atlassian.net/browse/SB-23481">SB-23481</a> <a href="https://project-sunbird.atlassian.net/browse/SB-23627">SB-23627</a> <a href="https://project-sunbird.atlassian.net/browse/SB-23671">SB-23671</a> <a href="https://project-sunbird.atlassian.net/browse/SB-23859">SB-23859</a> <a href="https://project-sunbird.atlassian.net/browse/SB-22505">SB-22505</a></td>
    </tr>
    <tr>
      <td>Run neo4j cypher script</td>
      <td>Run this at the end of deployment <a href="https://github.com/project-sunbird/sunbird-learning-platform/blob/release-3.8.0/docs/cypher-scripts/release-3.8.0.cypher">Script Link</a></td>
    </tr>
    <tr>
      <td>Delete all content and collection entry from KnowledgePlatform redis cache</td>
      <td>- Run this after running the neo4j cypher script<br /> - <code>redis-cli --scan --pattern do_* | xargs redis-cli del</code><br /> - <code>redis-cli --scan --pattern hierarchy_do_* | xargs redis-cli del</code><br /></td>
    </tr>
    <tr>
      <td>Run Cateogory Definition Update API</td>
      <td>Run this post deployment and restart Content and Assessment Service post successful API execution <a href="https://project-sunbird.atlassian.net/wiki/spaces/SingleSource/pages/2364964876/Course+primaryCategory+Config">Course Primary Category API</a> <a href="https://project-sunbird.atlassian.net/wiki/spaces/SingleSource/pages/2400616475/Practice+Question+Set+primaryCategory+Config">Practice Questionset Primary Category API</a></td>
    </tr>
  </tbody>
</table>

          
          <hr />
          
          <p class="edit-para text-right">
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/edit/master/developer-docs/upgrade/build_n_deploy.md" title="Fix this page">
				<i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit</a> |
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				<i class="fa fa-exclamation-circle" aria-hidden="true"></i> Report</a>
		  </p>
		  <a href="developer-docs/upgrade/build_n_deploy/#heading" class="scrollup"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></a>
          
      </div>
    </div>
    <div class="page-footer">
		<footer class="footer">
	<div class="footer__top">
		<div class="container">
			<div class="row">
				
			<div class="col-md-4 col-sm-12">
			</div>
			
			<div class="col-md-2 col-sm-6 ">
				<ul>
					<li><a href="http://www.sunbird.org/about/" target="_blank">About Sunbird</a></li>
					<li><a href="http://www.sunbird.org/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div>
			
			<div class="col-md-2 col-sm-6 sideline">
				<ul>
					<li><a href="http://www.sunbird.org/privacy-policy/" target="_blank">Privacy Policy</a></li>
					<li><a href="http://www.sunbird.org/features/" target="_blank">Microservices</a></li>
				</ul>
			</div>

			<div class="col-md-2 col-sm-12">
			</div>
			
		</div>
	</div>
</footer>
 

	</div>
  </div>
  <script type="text/javascript">
	//TOC Toggle
    $(function() {
        $.toc.clickHideButton();
    });
    //Scroll to top
    $(document).ready(function () {
		$(".content").scroll(function () {
			if ($(this).scrollTop() > 250) {
				$('.scrollup').fadeIn();
			} else {
				$('.scrollup').fadeOut();
			}
		});
	});
	$('#toc a').each(function(){
		var url = this.href.replace(baseURL.href, "");
		this.href = 'developer-docs/upgrade/build_n_deploy/' + url;
    })
	$(".zoomcover").click(function(){
		if (!$(this).hasClass("fullscreen")){
			$(this).addClass("fullscreen");
			$(this).find(".zoom").addClass("enabled").elevateZoom({
				zoomType: "inner",
				cursor  : "crosshair",
				scrollZoom: "true"
			});
		} else {
			$(this).removeClass("fullscreen");
			$(this).find(".zoom").removeClass("enabled");
			$(".zoomContainer").hide();
		}
	});
	$(document).keyup(function(e) {
     if (e.keyCode == 27) { 
		$(".zoomcover").removeClass("fullscreen");
		$(".zoomcover").find(".zoom").removeClass("enabled");
		$(".zoomContainer").hide();
    }
});
  </script>
  <style>
  .zoom:hover{
	cursor:url(/img/zoom.png),crosshair;
  }
  .zoomWindowContainer:hover div{
	cursor:url(/img/scroll.png),crosshair !important;
	height:15px;
	width:15px;
  }
  </style>
  <div id="templates"></div>
  </body>
</html>
