<!DOCTYPE html>
<html>
	<head>
	<base id="baseURL" href="/3.6.0/" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=10, user-scalable=yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-touch-fullscreen" content="yes" />
<link rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16">
<meta name="msapplication-TileColor" content="#65d3f7">
<meta name="msapplication-TileImage" content="/img/favicon/mstile-150x150.png">

<title>Build and Deploy</title>
<meta name="description" content="Build and Deploy"/>

<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-store" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="last-modified" content="2021-01-25 22:33:42 +0530">
<meta http-equiv="Expires" content="600" />

<!--Build Details-->
<meta name="buildVersion" content="" />
<meta name="buildNo" content="2983" />
<meta name="version" id="docsVersion" content="3.6.0" />
<!--/Build Details-->


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,600,700" >
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" >
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?25012021"  />

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js?25012021"></script>
<script type="text/javascript" src="/js/jquery.tocLight.js?25012021"></script>
<script type="text/javascript" src="/js/jquery.elevateZoom-3.0.8.min.js?25012021"></script>
<script type="text/javascript" src="/js/handlebars-v4.0.11.js?25012021"></script>
<script type="text/javascript" src="/js/widgets-data.js?25012021"></script>
<script type="text/javascript" src="/js/widgets.js?25012021"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106552125-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-106552125-1');
</script>
<script>
function resetBase(){
	currentURLArray = window.location.pathname.split( '/' );
    secondLevelLocation = currentURLArray[1];
    if (secondLevelLocation == 'latest'){
		baseURL = document.getElementById('baseURL');
		baseURL.href="/latest/";
	}
}
resetBase();
</script>

	
		<meta name="robots" content="index, follow">
	
  </head>
  <body id="body" class="doc-layout">
  <div class="container inner container-height docs">
    <header class="logo-container">
      <div class="logo">
        <a href="https://www.sunbird.org" target="_blank">
          <img src="/img/sunbird-logo.png" alt="Sunbird" title="Sunbird">
        </a>
      </div>
      <button type="button" class="dropdown-toggle collapsed" id="dropdown-trigger" data-toggle="collapse" data-target="#mobile-dropdown" aria-expanded="false">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </button>
    </header>
    <nav class="sidebar-container" id="mobile-dropdown">
      <div class="inner__sidebar">
        

<div id="" class="sidebar-cover">
	
	 <div class="search-cover">
	<form method="get" action="https://www.google.com/search" target="_blank">
		<input type="text" value="" name="q" placeholder="Search"/ class="search-input" title="Enter keyword to search">
		<input type="hidden" value="en" name="hl" />
		<input type="hidden" name="sitesearch" value="http://docs.sunbird.org" />
		<input type="hidden" value="lang_en" name="lr" />
		<button type="submit" onclick="submit()" class="search-btn" title="Search">
			<i class="fa fa-search"></i>
		</button>
	</form>
</div>
 
	<div id="widgetVersionSwitcher"></div>
	
	<div class="sidebar-wrapper developer-docs"> 
		
			
				
				
				<div class="active">
					<a href="developer-docs/" >
						<h4 class="sidebar-group-title">Developer Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/server-installation/" 
										 
										class="" 
										> 
										Server Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/server-installation/prerequisites/" 
												
												class="" 
												>
												Prerequisites
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/load_balancer_setup/" 
												
												class="" 
												>
												Load Balancer Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/ansible-variables/" 
												
												class="" 
												>
												Ansible Variables Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/jenkins-setup/" 
												
												class="" 
												>
												Jenkins Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/understanding-jenkins-scripts-jobs-parameters-and-variables/" 
												
												class="" 
												>
												Understanding Jenkins Scripts
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/running-build-artifact-uploads-and-deployments/" 
												
												class="" 
												>
												Running Builds, Artifact Uploads and Deployments
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-installation/artifactupload-job/" 
															
															class="" 
															>
															Artifact Upload Jobs
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/knowledge-platform/" 
															
															class="" 
															>
															Knowledge Platform
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/data-pipeline/" 
															
															class="" 
															>
															Data Pipeline
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/core-services/" 
															
															class="" 
															>
															Core Services
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/plugins/" 
															
															class="" 
															>
															Plugins
														</a>
													</li>
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/jenkins-tweaks/" 
												
												class="" 
												>
												Jenkins Tweaks
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/keycloak_user_federation/" 
												
												class="" 
												>
												Keycloak User Federation
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/post_installation_configuration/" 
												
												class="" 
												>
												Post Installation Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/server-configurations/" 
										 
										class="" 
										> 
										Server Configurations
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_portal/" 
												
												class="" 
												>
												Portal Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_content_service/" 
												
												class="" 
												>
												Content Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/configuring_domain_ext_links/" 
															
															class="" 
															>
															Import External Content
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/content_filtering/" 
															
															class="" 
															>
															Content Filtering
														</a>
													</li>
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/system_settings/" 
												
												class="" 
												>
												System Settings
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/configuring_email_notification/" 
												
												class="" 
												>
												Email Notification Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/content_checklist_configuration/" 
												
												class="" 
												>
												Reviewer Checklist
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/metadata_driven_forms/" 
												
												class="" 
												>
												Metaforms Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_lms/" 
												
												class="" 
												>
												LMS Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/sso_otpsms/" 
															
															class="" 
															>
															OTP based SMS Configuration
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/keycloak_admin_config_settings/" 
															
															class="" 
															>
															Keycloak Admin Configuration
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/developer-installation/" 
										 
										class="" 
										> 
										Developer Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/developer-installation/install_sbportal" 
												
												class="" 
												>
												Portal
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/mobile-app-installation/" 
										 
										class="" 
										> 
										Mobile App Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/mobile-app-installation/mobile_app_forms" 
												
												class="" 
												>
												Mobile App forms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/upgrade/" 
										 
										class="" 
										> 
										Upgrading Sunbird
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/upgrade/jenkins_updates/" 
												
												class="" 
												>
												Update Jenkins
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/upgrade/update_ansible_variables/" 
												
												class="" 
												>
												Update Ansible Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/upgrade/build_n_deploy/" 
												
												class="" 
												>
												Build and Deploy
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/onboarding/" 
										 
										class="" 
										> 
										Onboarding
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/singlesignon/org_user_creation_sso/" 
												
												class="" 
												>
												Creating Organizations and Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="features-documentation/badging_framework/creating_badges/" 
												
												class="" 
												>
												Creating Badges
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="features-documentation/badging_framework/badges_users/" 
												
												class="" 
												>
												Issuing Badges to Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/configuring_sunbird/configuring_announcement/" 
												
												class="" 
												>
												Creating Announcements
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/how-to-guide/overview_howto/" 
										 
										class="" 
										> 
										How-To-Guides
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_framework_in_sunbird/" 
												
												class="" 
												>
												Creating Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_seeddata_in_framework/" 
												
												class="" 
												>
												Adding Content to Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_organization/" 
												
												class="" 
												>
												Creating Organizations
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_user/" 
												
												class="" 
												>
												Creating Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_org_add_user/" 
												
												class="" 
												>
												Adding User to Organization
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_course_using_api/" 
												
												class="" 
												>
												Creating Course
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_upload_existing_content/" 
												
												class="" 
												>
												Uploading Content
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_badge/" 
												
												class="" 
												>
												Creating Badges
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/metadata_driven_forms" 
												
												class="" 
												>
												Configuring Metaforms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/link_dial_code_to_a_book" 
												
												class="" 
												>
												Linking DIAL Code
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/telemetry_data_consumption" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/sync_telemetry_data_captured_from_offline_devices" 
												
												class="" 
												>
												Syncing Telemetry Data
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/telemetry/overview/" 
										 
										class="" 
										> 
										Telemetry
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/specification/" 
												
												class="" 
												>
												Telemetry Specifications
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/sending_telemetry/" 
												
												class="" 
												>
												Sending Telemetry
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/consuming_telemetry/" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#mobile-app-workflow" 
															
															class="" 
															>
															Mobile App Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#web-portal-workflow" 
															
															class="" 
															>
															Web Portal Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#content-editor-workflow" 
															
															class="" 
															>
															Content Editor Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#backend-services-workflow" 
															
															class="" 
															>
															Backend-services Workflow
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/library_reference/" 
										 
										class="" 
										> 
										Library References
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/jslibrary/" 
												
												class="" 
												>
												Standalone JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/htmlinterfacelibrary/" 
												
												class="" 
												>
												HTML Interface Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/authtokengenerator_jslibrary/" 
												
												class="" 
												>
												AuthToken Generator JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								
								<a 
									href="developer-docs/troubleshooting/" 
									
									class="" 
									>
									Troubleshooting
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="apis/" >
						<h4 class="sidebar-group-title">API Reference Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="apis/#content--learning-services" 
									
									class="" 
									>
									Content & Learning Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#contribution--curation-services" 
									
									class="" 
									>
									Contribution & Curation Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#taxonomy--tagging-services" 
									
									class="" 
									>
									Taxonomy & Tagging Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#telemetry--data-analytics-services" 
									
									class="" 
									>
									Telemetry & Data Analytics Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#registry--discovery-services" 
									
									class="" 
									>
									Registry & Discovery Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#interaction--collaboration-services" 
									
									class="" 
									>
									Interaction & Collaboration Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#practice-sensing--assessment-services" 
									
									class="" 
									>
									Practice, Sensing & Assessment Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#credentialing--badging-services" 
									
									class="" 
									>
									Credentialing & Badging Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#infra--shared-services" 
									
									class="" 
									>
									Infra & Shared Services
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="faqs/" >
						<h4 class="sidebar-group-title">Frequently asked questions</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="faqs/audience/" 
									
									class="" 
									>
									Audience
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_format/" 
									
									class="" 
									>
									Content Format
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_repo/" 
									
									class="" 
									>
									Content Repositories
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/contentreviews/" 
									
									class="" 
									>
									Content Review
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_types/" 
									
									class="" 
									>
									Content Types
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_upload/" 
									
									class="" 
									>
									Content Upload
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/feature/" 
									
									class="" 
									>
									Features
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/fixerrors/" 
									
									class="" 
									>
									Fix Errors
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/helpsupport/" 
									
									class="" 
									>
									Help Support
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/intellectual_propertylicensesstandards/" 
									
									class="" 
									>
									Intellectual Property Licenses Standards
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/registrationenrolment/" 
									
									class="" 
									>
									Registration and Enrollment
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/signin/" 
									
									class="" 
									>
									Sign In
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/taxonomymetadataframework/" 
									
									class="" 
									>
									Taxonomy Metadata Framework
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/user_rightspermissions/" 
									
									class="" 
									>
									Users Rights and Permission
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="glossary/" >
						<h4 class="sidebar-group-title">Glossary</h4>
					</a>
					
				</div>
				
		
	</div>
</div>

<script>
	$("a[href$='developer-docs/upgrade/build_n_deploy/']").addClass("sidebar-link-selected");
</script>

      </div>
    </nav>
    <div class="content">
      <div class="inner__content header" id="heading">
        <h1>Build and Deploy </h1>
      </div>

      <div id="main-content" class="inner__content">
			<p class="edit-para text-right">
				<span>
			<!--<a target="_blank" class="contribute" href="/contributions/contribution_guidelines/">
				  <i class="fa fa-book" aria-hidden="true"></i> <i>Contribution Guidelines</i>
			  </a> &nbsp;&nbsp;-->
			  
			 <a target="_blank"  title="Edit this page"class="" href="https://github.com/project-sunbird/sunbird.org-docs/edit/3.6.0/developer-docs/upgrade/build_n_deploy.md">
				  <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit
			  </a> 
			  | 
			  <a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				  <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
				  Report
			  </a>
			  </span>
			</p>
			<div class="widgetLatestVersionNotification"></div>
          <div id="toc-container">
  <table class="toc" id="toc">
    <tbody>
      <tr>
        <td>
          <div id="toctitle">
            <h2>Contents</h2>
            <span class="toctoggle">[<a id="toctogglelink" class="internal" href="#">hide</a>]</span>
          </div>
          <ul>
            <li class="toc_level-1 toc_section-1">
              <a href="#overview"><span class="tocnumber">1 .</span> <span class="toctext">Overview</span></a>
            </li>
            <li class="toc_level-1 toc_section-2">
              <a href="#running-the-builds"><span class="tocnumber">2 .</span> <span class="toctext">Running the Builds</span></a>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div><h2 id="overview">Overview</h2>

<p>This page details out the jobs required to be run as part of the upgrade from Sunbird release 2.5.0 to release 3.1.0. Use the following table to understand the jobs that need to be executed in order to successfully complete the upgrade.</p>

<h2 id="running-the-builds">Running the Builds</h2>

<p><strong>IMPORTANT</strong>:</p>

<ol>
  <li>
    <p>Take a backup of all your databases by running backup jobs located under OpsAdministration → Core / KnowledgePlatform / DataPipeline → BackupJobs OR You can use VM Disk Snapshots from your cloud provider.</p>
  </li>
  <li>
    <p>Once all the variables and Jenkins configurations are complete, you can start to build and deploy services.</p>
  </li>
  <li>
    <p>Build and deploy the plugins. For details, refer to the  <a href="developer-docs/server-installation/plugins" target="_blank">Plugins</a> page</p>
  </li>
  <li>
    <p>After the plugins build and deploy, provide the blob url of the plugins zip file in the Player build. For details, refer to the Player build job on the <a href="developer-docs/server-installation/artifactupload-job/core-services" target="_blank">Core Services</a> page.</p>
  </li>
  <li>
    <p>Build all the services mentioned in the table below. Refer to <a href="developer-docs/server-installation/current_release_tags_n_jenkins_jobs/index.html" target="_blank">Current Release Tags and Jenkins Jobs Reference</a></p>
  </li>
</ol>

<p>The following is the list of jobs required to be built and deployed :</p>

<p>Order: Top down per column</p>

<table>
  <thead>
    <tr>
      <th>Knowledge Platform Build</th>
      <th>Knowledge Platform Deploy</th>
      <th>DataPipeline Build</th>
      <th>DataPipeline Provision</th>
      <th>DataPipeline Deploy</th>
      <th>Core Build</th>
      <th>Core Deploy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>KnowledgePlatform</td>
      <td>Learning</td>
      <td>AdhocScript</td>
      <td>AnalyticsApi</td>
      <td>AdhocScripts</td>
      <td>API MANAGER</td>
      <td>BootstrapMinima</td>
    </tr>
    <tr>
      <td>Yarn</td>
      <td>Yarn</td>
      <td>AnalyticsCore</td>
      <td>AnalyticsSpark</td>
      <td>AnalyticsAPI</td>
      <td>API MANAGER Echo</td>
      <td>nginx-private-ingress</td>
    </tr>
    <tr>
      <td> </td>
      <td>Neo4jDefinitionUpdate</td>
      <td>Analytics Service</td>
      <td>Cassandra</td>
      <td>AnalyticsCore</td>
      <td>lms</td>
      <td>API Manager</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Api module</td>
      <td>Postgres</td>
      <td>AnalyticsGeoLocationDBSetup</td>
      <td>Content</td>
      <td>API MANAGER Echo</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Core Data Product</td>
      <td>Influxdb</td>
      <td>AnalyticsPopulatePSQLConsumerChannelMapping</td>
      <td>Search</td>
      <td>OnboardAPIS</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>Data pipeline</td>
      <td>Zookeeper</td>
      <td>AnalyticsService</td>
      <td>Player</td>
      <td>OnboardConsumers</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>EdDataProducts</td>
      <td>Kafka</td>
      <td>ApiModule</td>
      <td>Keycloak</td>
      <td>Cassandra</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>Redis</td>
      <td>CoreDataProducts</td>
      <td>Proxy</td>
      <td>Keycloak</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>Kibana</td>
      <td>DataProducts</td>
      <td> </td>
      <td>Player</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>postgres-managed</td>
      <td>EdDataProducts</td>
      <td> </td>
      <td>Learner</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>TelemetrySearch</td>
      <td>ETLUserCacheIndexer</td>
      <td> </td>
      <td>Content</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>KafkaIndexer</td>
      <td> </td>
      <td>Search</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>KafkaSetup</td>
      <td> </td>
      <td>KnowledgeMW</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>Yarn</td>
      <td> </td>
      <td>Lms</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>certTemplate</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>Cert</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>nginx-public-ingress</td>
    </tr>
  </tbody>
</table>

<p>
  <strong>Create License and update Channel default License set and Content License migration based on channel</strong>
</p>

<p>1.Run the following script on the content-service  to create License .</p>

<pre>
  <code>"Copy below code and save file name as create_license"
#!/bin/bash
echo ""License name: $1""
echo ""License descripition: $2""
echo ""License url: $3""
curl -X POST \
  http://localhost:9000/license/v3/create \
  -H 'Content-Type: application/json' \
  -d '{
    ""request"":{
        ""license"":{
            ""name"": ""'$1'"",
            ""description"": ""'$2'"",
            ""url"": ""'$3'""
        }
    }
}'

Run these commands
bash -x script CC\ BY-NC-SA\ 4.0 This\ license\ is\ Creative\ Commons\ Attribution-NonCommercial-ShareAlike https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode
bash -x script CC\ BY-NC\ 4.0 This\ license\ is\ Creative\ Commons\ Attribution-NonCommercial  https://creativecommons.org/licenses/by-nc/4.0/legalcode
bash -x script CC\ BY-SA\ 4.0 This\ license\ is\ Creative\ Commons\ Attribution-ShareAlike https://creativecommons.org/licenses/by-sa/4.0/legalcode
bash -x script CC\ BY\ 4.0 This\ is\ the\ standard\ license\ of\ any\ Youtube\ content https://creativecommons.org/licenses/by/4.0/legalcode
bash -x script Standard\ YouTube\ License This\ license\ is\ Creative\ Commons\ Attribution-NonCommercial-ShareAlike https://www.youtube.com/"        
</code>
</pre>

<p>2.Update all content with valid license .</p>

<pre>
  <code>CREATE INDEX ON :domain(mimeType);
CREATE INDEX ON :domain(license);
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.license='Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)' SET n.license='CC BY-NC 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.license='Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)' SET n.license='CC BY-NC 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.license='Creative Commons Attribution-ShareAlike (CC BY-SA)' SET n.license='CC BY-SA 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.license='Creative Commons Attribution-ShareAlike (CC BY-SA)' SET n.license='CC BY-SA 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/vnd.ekstep.ecml-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/vnd.ekstep.html-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/vnd.android.package-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/vnd.ekstep.content-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/vnd.ekstep.content-collection' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/vnd.ekstep.plugin-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/vnd.ekstep.h5p-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/epub' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='text/x-url' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/x-youtube' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/octet-stream' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/msword' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='application/pdf' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='image/jpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='image/jpg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='image/png' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='image/tiff' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='image/bmp' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='image/gif' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='image/svg+xml' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/avi' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/mpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/quicktime' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/3gpp' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/mpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/mp4' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/ogg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='video/webm' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='audio/mp3' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='audio/mp4' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='audio/mpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='audio/ogg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='audio/webm' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='audio/x-wav' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where n.mimeType='audio/wav' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/vnd.ekstep.ecml-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/vnd.ekstep.html-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/vnd.android.package-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/vnd.ekstep.content-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/vnd.ekstep.content-collection' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/vnd.ekstep.plugin-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/vnd.ekstep.h5p-archive' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/epub' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='text/x-url' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/x-youtube' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/octet-stream' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/msword' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='application/pdf' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='image/jpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='image/jpg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='image/png' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='image/tiff' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='image/bmp' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='image/gif' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='image/svg+xml' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/avi' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/mpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/quicktime' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/3gpp' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/mpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/mp4' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/ogg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='video/webm' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='audio/mp3' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='audio/mp4' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='audio/mpeg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='audio/ogg' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='audio/webm' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='audio/x-wav' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where n.mimeType='audio/wav' AND not(n.license in ['CC BY-NC 4.0', 'CC BY-SA 4.0', 'Standard YouTube License']) SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.ecml-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.html-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/vnd.android.package-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.content-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.content-collection' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.plugin-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.h5p-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/epub' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='text/x-url' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/x-youtube' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/octet-stream' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/msword' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='application/pdf' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='image/jpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='image/jpg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='image/png' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='image/tiff' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='image/bmp' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='image/gif' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='image/svg+xml' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/avi' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/mpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/quicktime' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/3gpp' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/mpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/mp4' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/ogg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='video/webm' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='audio/mp3' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='audio/mp4' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='audio/mpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='audio/ogg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='audio/webm' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='audio/x-wav' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'Content'}) where not(exists(n.license)) AND n.mimeType='audio/wav' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.ecml-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.html-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/vnd.android.package-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.content-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.content-collection' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.plugin-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/vnd.ekstep.h5p-archive' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/epub' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='text/x-url' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/x-youtube' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/octet-stream' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/msword' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='application/pdf' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='image/jpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='image/jpg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='image/png' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='image/tiff' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='image/bmp' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='image/gif' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='image/svg+xml' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/avi' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/mpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/quicktime' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/3gpp' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/mpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/mp4' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/ogg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='video/webm' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='audio/mp3' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='audio/mp4' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='audio/mpeg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='audio/ogg' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='audio/webm' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='audio/x-wav' SET n.license='CC BY 4.0';
match (n:domain{IL_FUNC_OBJECT_TYPE:'ContentImage'}) where not(exists(n.license)) AND n.mimeType='audio/wav' SET n.license='CC BY 4.0';
match (n:domain{}) where n.IL_FUNC_OBJECT_TYPE in ['Content', 'ContentImage'] return n.license, count(n);
DROP INDEX ON :domain(mimeType);
DROP INDEX ON :domain(license);
</code>
</pre>
<p>Copy above code and save it as migration.txt in neo4j server in tha path /home/learning/neo4j-learning/neo4j-enterprise-3.3.0/bin</p>

<p>run the command to update content with valid license</p>
<pre>
  <code>cat migration.txt | ./cypher-shell
</code>
</pre>

<p>3.Run the above script from learning server to update the Channel-default license .</p>

<pre>
  <code>Copy below code and save file name as channel_license.sh
#!/bin/bash
echo "Channel Id: $1"
echo "Default License: $2"
IFS=,
curl -X PATCH \
"http://localhost:8080/channel/v3/update/"$1 \
-H 'Content-Type: application/json' \
-d '{
   "request": {
      "channel": {
        "defaultLicense":"'$2'"
      }
    }
}'

Run the Command
./channel_license.sh &lt;channle_Id&gt; &lt;license_name&gt;

license_name can be choosen from the list which was created in the 1st Step.
</code>
</pre>

<p>4.Update content with channel specific default license, Run the below query in neo4j</p>

<pre>
  <code>match (n:domain{}) WHERE n.IL_FUNC_OBJECT_TYPE IN ["Content", "ContentImage"] AND n.channel="&lt;channel id&gt;" AND n.license&lt;&gt;"Standard YouTube License" SET n.license="&lt;channel defaultLicense&gt;";
</code>
</pre>

<p>
  <strong>Clear Redis cache</strong>
</p>

<p>Run the below command in LP redis server</p>

<pre>
  <code>cd /home/learning/redis-stable/src
./redis-cli keys do_* | xargs ./redis-cli del
</code>
</pre>
<p>5.Kong 9-14 migration</p>

<pre>
  <code>export PG_DB="api_manager_kong14"

docker container rm kong-migration

docker run -it --name kong-migration \
-e ""KONG_DATABASE=postgres"" \
-e ""KONG_PG_DATABASE=$PG_DB"" \
-e ""KONG_PG_HOST=$PG_HOST"" \
-e ""KONG_PG_PASSWORD=$PGPASSWORD"" \
-e ""KONG_PG_USER=$PG_USER"" \
-e ""KONG_PROXY_ACCESS_LOG=/dev/stdout"" \
-e ""KONG_ADMIN_ACCESS_LOG=/dev/stdout"" \
-e ""KONG_PROXY_ERROR_LOG=/dev/stderr"" \
-e ""KONG_ADMIN_ERROR_LOG=/dev/stderr"" \
-e ""KONG_ADMIN_LISTEN=0.0.0.0:8001"" \
-p 8000:8000 \
-p 8001:8001 \
kong:0.14.1 kong migrations up --vv

</code>
</pre>


          
          <hr />
          
          <p class="edit-para text-right">
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/edit/3.6.0/developer-docs/upgrade/build_n_deploy.md" title="Fix this page">
				<i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit</a> |
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				<i class="fa fa-exclamation-circle" aria-hidden="true"></i> Report</a>
		  </p>
		  <a href="developer-docs/upgrade/build_n_deploy/#heading" class="scrollup"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></a>
          
      </div>
    </div>
    <div class="page-footer">
		<footer class="footer">
	<div class="footer__top">
		<div class="container">
			<div class="row">
				
			<div class="col-md-4 col-sm-12">
			</div>
			
			<div class="col-md-2 col-sm-6 ">
				<ul>
					<li><a href="http://www.sunbird.org/about/" target="_blank">About Sunbird</a></li>
					<li><a href="http://www.sunbird.org/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div>
			
			<div class="col-md-2 col-sm-6 sideline">
				<ul>
					<li><a href="http://www.sunbird.org/privacy-policy/" target="_blank">Privacy Policy</a></li>
					<li><a href="http://www.sunbird.org/features/" target="_blank">Microservices</a></li>
				</ul>
			</div>

			<div class="col-md-2 col-sm-12">
			</div>
			
		</div>
	</div>
</footer>
 

	</div>
  </div>
  <script type="text/javascript">
	//TOC Toggle
    $(function() {
        $.toc.clickHideButton();
    });
    //Scroll to top
    $(document).ready(function () {
		$(".content").scroll(function () {
			if ($(this).scrollTop() > 250) {
				$('.scrollup').fadeIn();
			} else {
				$('.scrollup').fadeOut();
			}
		});
	});
	$('#toc a').each(function(){
		var url = this.href.replace(baseURL.href, "");
		this.href = 'developer-docs/upgrade/build_n_deploy/' + url;
    })
	$(".zoomcover").click(function(){
		if (!$(this).hasClass("fullscreen")){
			$(this).addClass("fullscreen");
			$(this).find(".zoom").addClass("enabled").elevateZoom({
				zoomType: "inner",
				cursor  : "crosshair",
				scrollZoom: "true"
			});
		} else {
			$(this).removeClass("fullscreen");
			$(this).find(".zoom").removeClass("enabled");
			$(".zoomContainer").hide();
		}
	});
	$(document).keyup(function(e) {
     if (e.keyCode == 27) { 
		$(".zoomcover").removeClass("fullscreen");
		$(".zoomcover").find(".zoom").removeClass("enabled");
		$(".zoomContainer").hide();
    }
});
  </script>
  <style>
  .zoom:hover{
	cursor:url(/img/zoom.png),crosshair;
  }
  .zoomWindowContainer:hover div{
	cursor:url(/img/scroll.png),crosshair !important;
	height:15px;
	width:15px;
  }
  </style>
  <div id="templates"></div>
  </body>
</html>
