<!DOCTYPE html>
<html>
	<head>
	<base id="baseURL" href="/3.8.0/" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=10, user-scalable=yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-touch-fullscreen" content="yes" />
<link rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16">
<meta name="msapplication-TileColor" content="#65d3f7">
<meta name="msapplication-TileImage" content="/img/favicon/mstile-150x150.png">

<title>Core Services</title>
<meta name="description" content="Explains how to create schemas for Core service objects"/>

<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-store" />
<meta http-equiv="pragma" content="no-cache" />
<meta name="last-modified" content="2021-04-05 13:03:53 +0530">
<meta http-equiv="Expires" content="600" />

<!--Build Details-->
<meta name="buildVersion" content="" />
<meta name="buildNo" content="3201" />
<meta name="version" id="docsVersion" content="3.8.0" />
<!--/Build Details-->


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,600,700" >
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" >
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?05042021"  />

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js?05042021"></script>
<script type="text/javascript" src="/js/jquery.tocLight.js?05042021"></script>
<script type="text/javascript" src="/js/jquery.elevateZoom-3.0.8.min.js?05042021"></script>
<script type="text/javascript" src="/js/handlebars-v4.0.11.js?05042021"></script>
<script type="text/javascript" src="/js/widgets-data.js?05042021"></script>
<script type="text/javascript" src="/js/widgets.js?05042021"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106552125-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-106552125-1');
</script>
<script>
function resetBase(){
	currentURLArray = window.location.pathname.split( '/' );
    secondLevelLocation = currentURLArray[1];
    if (secondLevelLocation == 'latest'){
		baseURL = document.getElementById('baseURL');
		baseURL.href="/latest/";
	}
}
resetBase();
</script>

	
		<meta name="robots" content="index, follow">
	
  </head>
  <body id="body" class="doc-layout">
  <div class="container inner container-height docs">
    <header class="logo-container">
      <div class="logo">
        <a href="https://www.sunbird.org" target="_blank">
          <img src="/img/sunbird-logo.png" alt="Sunbird" title="Sunbird">
        </a>
      </div>
      <button type="button" class="dropdown-toggle collapsed" id="dropdown-trigger" data-toggle="collapse" data-target="#mobile-dropdown" aria-expanded="false">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </button>
    </header>
    <nav class="sidebar-container" id="mobile-dropdown">
      <div class="inner__sidebar">
        

<div id="" class="sidebar-cover">
	
	 <div class="search-cover">
	<form method="get" action="https://www.google.com/search" target="_blank">
		<input type="text" value="" name="q" placeholder="Search"/ class="search-input" title="Enter keyword to search">
		<input type="hidden" value="en" name="hl" />
		<input type="hidden" name="sitesearch" value="http://docs.sunbird.org" />
		<input type="hidden" value="lang_en" name="lr" />
		<button type="submit" onclick="submit()" class="search-btn" title="Search">
			<i class="fa fa-search"></i>
		</button>
	</form>
</div>
 
	<div id="widgetVersionSwitcher"></div>
	
	<div class="sidebar-wrapper developer-docs"> 
		
			
				
				
				<div class="active">
					<a href="developer-docs/" >
						<h4 class="sidebar-group-title">Developer Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/server-installation/" 
										 
										class="" 
										> 
										Server Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/server-installation/prerequisites/" 
												
												class="" 
												>
												Prerequisites
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/load_balancer_setup/" 
												
												class="" 
												>
												Load Balancer Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/ansible-variables/" 
												
												class="" 
												>
												Ansible Variables Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/jenkins-setup/" 
												
												class="" 
												>
												Jenkins Setup
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/understanding-jenkins-scripts-jobs-parameters-and-variables/" 
												
												class="" 
												>
												Understanding Jenkins Scripts
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/running-build-artifact-uploads-and-deployments/" 
												
												class="" 
												>
												Running Builds, Artifact Uploads and Deployments
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-installation/artifactupload-job/" 
															
															class="" 
															>
															Artifact Upload Jobs
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/knowledge-platform/" 
															
															class="" 
															>
															Knowledge Platform
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/data-pipeline/" 
															
															class="" 
															>
															Data Pipeline
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/core-services/" 
															
															class="" 
															>
															Core Services
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-installation/plugins/" 
															
															class="" 
															>
															Plugins
														</a>
													</li>
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/jenkins-tweaks/" 
												
												class="" 
												>
												Jenkins Tweaks
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/keycloak_user_federation/" 
												
												class="" 
												>
												Keycloak User Federation
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-installation/post_installation_configuration/" 
												
												class="" 
												>
												Post Installation Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/server-configurations/" 
										 
										class="" 
										> 
										Server Configurations
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_portal/" 
												
												class="" 
												>
												Portal Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_content_service/" 
												
												class="" 
												>
												Content Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/configuring_domain_ext_links/" 
															
															class="" 
															>
															Import External Content
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/content_filtering/" 
															
															class="" 
															>
															Content Filtering
														</a>
													</li>
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/system_settings/" 
												
												class="" 
												>
												System Settings
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/configuring_email_notification/" 
												
												class="" 
												>
												Email Notification Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/content_checklist_configuration/" 
												
												class="" 
												>
												Reviewer Checklist
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/metadata_driven_forms/" 
												
												class="" 
												>
												Metaforms Configuration
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/server-configurations/env_variables_lms/" 
												
												class="" 
												>
												LMS Service Environment Variables
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/sso_otpsms/" 
															
															class="" 
															>
															OTP based SMS Configuration
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/server-configurations/keycloak_admin_config_settings/" 
															
															class="" 
															>
															Keycloak Admin Configuration
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/developer-installation/" 
										 
										class="" 
										> 
										Developer Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/developer-installation/install_sbportal" 
												
												class="" 
												>
												Portal
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/mobile-app-installation/" 
										 
										class="" 
										> 
										Mobile App Installation
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/mobile-app-installation/mobile_app_forms" 
												
												class="" 
												>
												Mobile App forms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/upgrade/" 
										 
										class="" 
										> 
										Upgrading Sunbird
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/upgrade/jenkins_updates/" 
												
												class="" 
												>
												Update Jenkins
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/upgrade/update_ansible_variables/" 
												
												class="" 
												>
												Update Ansible Variables
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/upgrade/build_n_deploy/" 
												
												class="" 
												>
												Build and Deploy
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/onboarding/" 
										 
										class="" 
										> 
										Onboarding
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/singlesignon/org_user_creation_sso/" 
												
												class="" 
												>
												Creating Organizations and Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="features-documentation/badging_framework/creating_badges/" 
												
												class="" 
												>
												Creating Badges
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="features-documentation/badging_framework/badges_users/" 
												
												class="" 
												>
												Issuing Badges to Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/configuring_sunbird/configuring_announcement/" 
												
												class="" 
												>
												Creating Announcements
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/how-to-guide/overview_howto/" 
										 
										class="" 
										> 
										How-To-Guides
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_framework_in_sunbird/" 
												
												class="" 
												>
												Creating Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_seeddata_in_framework/" 
												
												class="" 
												>
												Adding Content to Framework
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_organization/" 
												
												class="" 
												>
												Creating Organizations
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_user/" 
												
												class="" 
												>
												Creating Users
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_org_add_user/" 
												
												class="" 
												>
												Adding User to Organization
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_course_using_api/" 
												
												class="" 
												>
												Creating Course
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_upload_existing_content/" 
												
												class="" 
												>
												Uploading Content
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/how_to_create_badge/" 
												
												class="" 
												>
												Creating Badges
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/metadata_driven_forms" 
												
												class="" 
												>
												Configuring Metaforms
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/link_dial_code_to_a_book" 
												
												class="" 
												>
												Linking DIAL Code
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/telemetry_data_consumption" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/how-to-guide/sync_telemetry_data_captured_from_offline_devices" 
												
												class="" 
												>
												Syncing Telemetry Data
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/telemetry/overview/" 
										 
										class="" 
										> 
										Telemetry
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/specification/" 
												
												class="" 
												>
												Telemetry Specifications
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/sending_telemetry/" 
												
												class="" 
												>
												Sending Telemetry
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/consuming_telemetry/" 
												
												class="" 
												>
												Consuming Telemetry Data
											</a>
											<ul class="sidebar-group">
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#mobile-app-workflow" 
															
															class="" 
															>
															Mobile App Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#web-portal-workflow" 
															
															class="" 
															>
															Web Portal Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#content-editor-workflow" 
															
															class="" 
															>
															Content Editor Workflow
														</a>
													</li>
												
													<li>
														
														<a  
															href="developer-docs/telemetry/consuming_telemetry/#backend-services-workflow" 
															
															class="" 
															>
															Backend-services Workflow
														</a>
													</li>
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								<div class="">
									
									<a 
										href="developer-docs/library_reference/" 
										 
										class="" 
										> 
										Library References
									</a>
									<ul class="sidebar-group">
										
										<li>
											
											<a  
												href="developer-docs/telemetry/jslibrary/" 
												
												class="" 
												>
												Standalone JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/htmlinterfacelibrary/" 
												
												class="" 
												>
												HTML Interface Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
										<li>
											
											<a  
												href="developer-docs/telemetry/authtokengenerator_jslibrary/" 
												
												class="" 
												>
												AuthToken Generator JS Library
											</a>
											<ul class="sidebar-group">
												
											</ul>
										</li>
										
									</ul>
								</div>
							
						</li>
					
						<li>
							
								
								<a 
									href="developer-docs/troubleshooting/" 
									
									class="" 
									>
									Troubleshooting
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="apis/" >
						<h4 class="sidebar-group-title">API Reference Documentation</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="apis/#content--learning-services" 
									
									class="" 
									>
									Content & Learning Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#contribution--curation-services" 
									
									class="" 
									>
									Contribution & Curation Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#taxonomy--tagging-services" 
									
									class="" 
									>
									Taxonomy & Tagging Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#telemetry--data-analytics-services" 
									
									class="" 
									>
									Telemetry & Data Analytics Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#registry--discovery-services" 
									
									class="" 
									>
									Registry & Discovery Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#interaction--collaboration-services" 
									
									class="" 
									>
									Interaction & Collaboration Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#practice-sensing--assessment-services" 
									
									class="" 
									>
									Practice, Sensing & Assessment Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#credentialing--badging-services" 
									
									class="" 
									>
									Credentialing & Badging Services
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="apis/#infra--shared-services" 
									
									class="" 
									>
									Infra & Shared Services
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="faqs/" >
						<h4 class="sidebar-group-title">Frequently asked questions</h4>
					</a>
					
					<ul class="sidebar-group">
					
						<li>
							
								
								<a 
									href="faqs/audience/" 
									
									class="" 
									>
									Audience
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_format/" 
									
									class="" 
									>
									Content Format
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_repo/" 
									
									class="" 
									>
									Content Repositories
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/contentreviews/" 
									
									class="" 
									>
									Content Review
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_types/" 
									
									class="" 
									>
									Content Types
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/content_upload/" 
									
									class="" 
									>
									Content Upload
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/feature/" 
									
									class="" 
									>
									Features
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/fixerrors/" 
									
									class="" 
									>
									Fix Errors
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/helpsupport/" 
									
									class="" 
									>
									Help Support
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/intellectual_propertylicensesstandards/" 
									
									class="" 
									>
									Intellectual Property Licenses Standards
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/registrationenrolment/" 
									
									class="" 
									>
									Registration and Enrollment
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/signin/" 
									
									class="" 
									>
									Sign In
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/taxonomymetadataframework/" 
									
									class="" 
									>
									Taxonomy Metadata Framework
								</a>
							
						</li>
					
						<li>
							
								
								<a 
									href="faqs/user_rightspermissions/" 
									
									class="" 
									>
									Users Rights and Permission
								</a>
							
						</li>
					
					</ul>
					
				</div>
			
				
				
				<div class="">
					<a href="glossary/" >
						<h4 class="sidebar-group-title">Glossary</h4>
					</a>
					
				</div>
				
		
	</div>
</div>

<script>
	$("a[href$='developer-docs/server-installation/core-services/']").addClass("sidebar-link-selected");
</script>

      </div>
    </nav>
    <div class="content">
      <div class="inner__content header" id="heading">
        <h1>Core Services </h1>
      </div>

      <div id="main-content" class="inner__content">
			<p class="edit-para text-right">
				<span>
			<!--<a target="_blank" class="contribute" href="/contributions/contribution_guidelines/">
				  <i class="fa fa-book" aria-hidden="true"></i> <i>Contribution Guidelines</i>
			  </a> &nbsp;&nbsp;-->
			  
			 <a target="_blank"  title="Edit this page"class="" href="https://github.com/project-sunbird/sunbird.org-docs/edit/3.8.0/developer-docs/server-installation/core-services.md">
				  <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit
			  </a> 
			  | 
			  <a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				  <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
				  Report
			  </a>
			  </span>
			</p>
			<div class="widgetLatestVersionNotification"></div>
          <div id="toc-container">
  <table class="toc" id="toc">
    <tbody>
      <tr>
        <td>
          <div id="toctitle">
            <h2>Contents</h2>
            <span class="toctoggle">[<a id="toctogglelink" class="internal" href="#">hide</a>]</span>
          </div>
          <ul>
            <li class="toc_level-1 toc_section-1">
              <a href="#overview"><span class="tocnumber">1 .</span> <span class="toctext">Overview</span></a>
            </li>
            <li class="toc_level-1 toc_section-2">
              <a href="#prerequisites"><span class="tocnumber">2 .</span> <span class="toctext">Prerequisites</span></a>
            </li>
            <li class="toc_level-1 toc_section-3">
              <a href="#running-the-jobs"><span class="tocnumber">3 .</span> <span class="toctext">Running the Jobs</span></a>
              <ul>
                <li class="toc_level-2 toc_section-4">
                  <a href="#devops-administration"><span class="tocnumber">3.1 .</span> <span class="toctext">DevOps Administration</span></a>
                </li>
                <li class="toc_level-2 toc_section-5">
                  <a href="#builds"><span class="tocnumber">3.2 .</span> <span class="toctext">Builds</span></a>
                </li>
                <li class="toc_level-2 toc_section-6">
                  <a href="#artifacts"><span class="tocnumber">3.3 .</span> <span class="toctext">Artifacts</span></a>
                </li>
                <li class="toc_level-2 toc_section-7">
                  <a href="#provision"><span class="tocnumber">3.4 .</span> <span class="toctext">Provision</span></a>
                </li>
                <li class="toc_level-2 toc_section-8">
                  <a href="#deploy"><span class="tocnumber">3.5 .</span> <span class="toctext">Deploy</span></a>
                </li>
                <li class="toc_level-2 toc_section-9">
                  <a href="#keycloak-configuration"><span class="tocnumber">3.6 .</span> <span class="toctext">Keycloak Configuration</span></a>
                </li>
                <li class="toc_level-2 toc_section-10">
                  <a href="#create-root-org"><span class="tocnumber">3.7 .</span> <span class="toctext">Create Root org</span></a>
                </li>
                <li class="toc_level-2 toc_section-11">
                  <a href="#knong-migration"><span class="tocnumber">3.8 .</span> <span class="toctext">Knong migration</span></a>
                </li>
                <li class="toc_level-2 toc_section-12">
                  <a href="#create-master-category"><span class="tocnumber">3.9 .</span> <span class="toctext">Create master category</span></a>
                </li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div><h2 id="overview">Overview</h2>
<p>This page explains the jobs to be run to bring up the Core services.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>1.Create a container in the Azure blob and make it public to publish content. The container name must be the same as the variable <strong>sunbird_content_azure_storage_container</strong> specified in the <strong>common.yml</strong> file present in the core inventory.</p>

<p>2.Switch to the <code>Build</code> folder and run all jobs. Set the value for <strong>github_release_tag</strong> according to the details mentioned in this page - <a href="developer-docs/server-installation/current_release_tags_n_jenkins_jobs" target="_blank">Current Release Tags and Jenkins Jobs Reference</a></p>

<h2 id="running-the-jobs">Running the Jobs</h2>

<blockquote>
  <p>Note: Adhere to the following sequence when running the jobs.</p>
</blockquote>

<h3 id="devops-administration">DevOps Administration</h3>

<table>
  <thead>
    <tr>
      <th>Operation Name</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Bootstrap</td>
      <td>Creates Deployer User</td>
    </tr>
  </tbody>
</table>

<h3 id="builds">Builds</h3>

<table>
  <thead>
    <tr>
      <th>Build Name</th>
      <th>Function (Builds)</th>
      <th>CURRENT RELEASE TAG</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Adminutils</td>
      <td>Adminutils docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>API MANAGER</td>
      <td>API manager docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>API MANAGER Echo</td>
      <td>API manager echo docker image</td>
      <td>master</td>
    </tr>
    <tr>
      <td>Badger</td>
      <td>Badger docker image</td>
      <td> </td>
    </tr>
    <tr>
      <td>Cassandra</td>
      <td>Jar for migration</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Lms</td>
      <td>LMS service docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Content</td>
      <td>Content service docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Search</td>
      <td>search service docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>KnowledgeMW</td>
      <td>Knowledge-mw service docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Learner</td>
      <td>Learner service docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Player</td>
      <td>Player service docker image.</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Cert</td>
      <td>Cert service docker image</td>
      <td>release-1.1.1</td>
    </tr>
    <tr>
      <td>EncService</td>
      <td>Envservice docker image</td>
      <td>release-1.1.1</td>
    </tr>
    <tr>
      <td>Proxy</td>
      <td>Proxy docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Telemetry</td>
      <td>Telemetry docker image</td>
      <td>release-2.1.0</td>
    </tr>
    <tr>
      <td>Keycloak</td>
      <td>Keycloak zip file</td>
      <td>release-1.15_RC9</td>
    </tr>
    <tr>
      <td>Analytics</td>
      <td>Analytics service docker image</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Taxonomy</td>
      <td>Taxonomy service docker image</td>
      <td>release-3.5.0</td>
    </tr>
  </tbody>
</table>

<h3 id="artifacts">Artifacts</h3>
<p>Ensure that all Artifacts are uploaded</p>

<h3 id="provision">Provision</h3>

<table>
  <thead>
    <tr>
      <th>Operation Name</th>
      <th>Function</th>
      <th>Description</th>
      <th>CURRENT RELEASE TAG</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>(Deploy) ApplicationES( Kubernetes folder)</td>
      <td>Provisions Elasticsearch 6.2.3 version used by core services</td>
      <td>From the Deploy Folder, <strong>Deploy ApplicationES</strong> provisions for the Elasticsearch and creates indices necessary for Sunbird Core</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>ESMapping (Under OpsAdministarion. Provide the value as <em>all</em> for job parameter indices_name)</td>
      <td>Creates Elasticsearch indexes</td>
      <td>Creates the specific index with its mapping or all indices which will be used by our sunbird app</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Postgres</td>
      <td>Provisions for Postgres</td>
      <td>Provisions the Postgres instance</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>PostgresDbUpdate</td>
      <td>Creates the databases, assigns roles and creates users</td>
      <td>Creates a schema with DB’s, Tables</td>
      <td>release-3.5.0 <strong>Perform Kong migration once db update is done, steps are mentioned in the kong migration section</strong></td>
    </tr>
    <tr>
      <td>EsReindexing (Under OpsAdministario, parameters should be esHost: es ip, oldIndex: certreg, newIndex: certv2, aliasName: certs, indexFileLocation: sunbird-es-utils/src/main/resources/reindexing/indices/certreg_indices.json, mappingFileLocation: sunbird-es-utils/src/main/resources/reindexing/mappings/certreg_mappings.json)</td>
      <td>—</td>
      <td>—</td>
      <td>release-3.5.0</td>
    </tr>
  </tbody>
</table>

<h3 id="deploy">Deploy</h3>

<table>
  <thead>
    <tr>
      <th>Operation Name</th>
      <th>Function</th>
      <th>Description</th>
      <th>CURRENT RELEASE TAG</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BootstrapMinimal</td>
      <td>creating the namespace for kubernetes orchestration and also Bootstrap minimal create docker registry secrets and nginx ssls also</td>
      <td>Creates namespace for the core service</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>nginx-private-ingress</td>
      <td>xxxx</td>
      <td>xxxx</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>API Manager</td>
      <td>Deploys the API manager Kong and API manager Echo</td>
      <td>Manages consumers and APIs of sunbird</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>OnboardAPIS</td>
      <td>Onboards all API’s to Sunbird</td>
      <td>onboards sunbird API’s</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>OnboardConsumers</td>
      <td>Onboards sunbird consumers</td>
      <td>onboards sunbird consumers</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Update <strong>core_vault_sunbird_api_auth_token</strong>, <strong>core_vault_kong__test_jwt</strong> and <strong>core_vault_sunbird_ekstep_api_key</strong> with the <strong>jwt token</strong> from the Jenkins output of <strong>api-management-test-user</strong> if you are using the Knowledge Platform and Data Pipeline along with core</td>
      <td>Generates user specific key</td>
      <td>Onboards new consumer to Sunbird and generates the consumer specific API key</td>
      <td> </td>
    </tr>
    <tr>
      <td>(Provision) Cassandra</td>
      <td>Provisions Cassandra and create keyspaces required for Sunbird Core</td>
      <td>Provisions Cassandra and creates keyspaces and performs migration</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Cassandra</td>
      <td>Performs keyspace schema migration</td>
      <td>Performs migration if required. Deploy this thrice by choosing different zip files using the build_number parameter. Ensure that you get a success message for the Cassandra migration on the Jenkins console output. Do not rely only on the red or green status indicator on Jenkins job</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>(Provision) Keycloak</td>
      <td>Install dependencies for keycloak</td>
      <td>Provisions Keycloak by installing prerequisites like Java and environment variables</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Keycloak</td>
      <td>Deploys Keycloak service to VM</td>
      <td>Centralized user management for sunbird</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>KeycloakRealm(Core folder)</td>
      <td>User management -Creates sunbird realm</td>
      <td>Creates a Sunbird Realm. After the Sunbird realm is created, configure Keycloak by using the steps mentioned in the <strong>Keycloak Configuration</strong> section</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Adminutil</td>
      <td>Deploys the Adminutil container</td>
      <td>Creates tokens for the sunbird devices</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Player</td>
      <td>UI for sunbird</td>
      <td>Deploys portal UI</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Learner</td>
      <td>Deploys the Learner Service</td>
      <td>Handles user management and helps to search org</td>
      <td>release-3.5.0 <strong>before deploying learner service Create root org by using the steps mentioned in the Create Org section below</strong></td>
    </tr>
    <tr>
      <td>Content</td>
      <td>Deploys content service</td>
      <td>Helps to create content</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Search</td>
      <td>Deploys the search service artefacts and starts the search service</td>
      <td> </td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>KnowledgeMW</td>
      <td>Deploys knowledgemw service</td>
      <td>Deploys the knowledgemw service</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Lms</td>
      <td>Deploys LMS Service</td>
      <td>Provides the APIs for LMS functionality of Sunbird</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>EncService</td>
      <td>Deploys enc service</td>
      <td>Encrypts and decrypt the keys to generate certificate</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Cert</td>
      <td>Deploys cert services</td>
      <td>Issues certificates</td>
      <td>release-3.1.0</td>
    </tr>
    <tr>
      <td>Telemetry</td>
      <td>Aggregates and send telemetry data to kafka</td>
      <td>Telemetry management service</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Analytics</td>
      <td>Deploys Analytics service</td>
      <td>Deploys Analytics service</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>Taxonomy</td>
      <td>Deploys Taxonomy service</td>
      <td>Deploys Taxonomy service</td>
      <td>release-3.5.0 after deploying taxonomy service create master category and run definition scripts by using the steps mentioned in <strong>Create master category</strong> section</td>
    </tr>
    <tr>
      <td>nginx-public-ingress</td>
      <td>Deploys Proxy service</td>
      <td>Deploys Nginx</td>
      <td>release-3.5.0</td>
    </tr>
    <tr>
      <td>BootstrapMinimal</td>
      <td>creating the namespace for kubernetes orchestration  and also Bootstrap minimal create docker registry secrets and nginx ssls also</td>
      <td>Creates namespace for the core service</td>
      <td>release-3.5.0</td>
    </tr>
  </tbody>
</table>

<h3 id="keycloak-configuration">Keycloak Configuration</h3>

<blockquote>
  <p>Note: From release-2.0.0 keycloak admin portal is disabled from public internet. 
You must tunnel the port in to the local machine via ssh tunnelling.<br />
<code>ssh -L 8080:localhost:8080 ops@~keycloak-ip-address~</code><br />
You can access keycloak via <code>localhost:8080</code></p>
</blockquote>

<table>
  <thead>
    <tr>
      <th>Step</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Login to Keycloak using the user name <strong>admin</strong> and password as given in the private <strong>secrets.yml</strong> file. Or, login to keycloak using &lt;localhost:8080&gt;/auth</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Navigate to Sunbird Realm &gt; Realm Settings &gt; Keys. Click <code>Public Key</code>. Copy the key value that you see and update the variable core_vault_sso_public_key</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Creating keycloak federation <a href="developer-docs/server-installation/keycloak_user_federation">Deployment Steps for Keycloak User Federation</a></td>
    </tr>
    <tr>
      <td>4</td>
      <td>Creating keycloak lms client <a href="developer-docs/server-installation/keycloak_lms_configuration">Creation Steps for Keycloak lms client</a></td>
    </tr>
    <tr>
      <td>5</td>
      <td>Create Keycloak Password policy: navigate to Authentication &gt; Password Policy &gt; from add policy drop down select <code>Hashing Iterations, Minimum Length, Special Characters, Uppercase Characters, Lowercase Characters</code></td>
    </tr>
    <tr>
      <td>6</td>
      <td>Get the value for variable adminutil_refresh_token_public_key_kid <a href="developer-docs/server-installation/adminutil_refresh_token">Steps to get the value for variable</a></td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong>
If the Cassandra migration fails, run the query manually to set the corresponding version for the failed migration to True</p>

<p>
  <strong>Example:</strong>
</p>

<p>
  <code>SELECT * from sunbird.cassandra_migration_version;</code>
</p>

<p>Check the rows for which the value in the success column is False. The following is an example -</p>

<p>
  <code>1.80 |   180685665 |   cassandra |              4 |         null | 2019-12-01 13:58:52.401000+0000 |            136 | V1.80_cassandra.cql |   False |  CQL |           80</code>
</p>

<p>Run the update query for each row separately</p>

<p>
  <code>update sunbird.cassandra_migration_version set success=True where version ='1.80';</code>
</p>

<p>Verify that all the values in the success column are True and rerun the Jenkins job again with same zip file and tag</p>

<p>Once this succeeds, use the second zip file and tag to deploy again</p>

<p>The current migration version is 1.88. The output of the Jenkins job should be as follows -</p>

<p>
  <code>Migrating keyspace Sunbird to version 1.88 - Cassandra
Successfully applied 3 migrations to keyspace sunbird (execution time 00:20.547s).
Migration Completed at ==1571996508540</code>
</p>

<h3 id="create-root-org">Create Root org</h3>

<pre>
  <code>   # Create root org
      # cqlsh
      INSERT INTO sunbird.organisation (id,channel,orgname,hashtagid,isrootorg) values ('1234567890','default', 'default','1234567890',true);
      
      # from Elastic search
      # Sync to es
      curl -X PUT "localhost:9200/org/_doc/1234567890?pretty" -H 'Content-Type: application/json' -d'
      {
        "id": "1234567890",
        "channel": "default",
        "orgname": "default",
        "hashtagid": "1234567890",
        "isrootorg": true
      }
      
      #cqlsh
      # Insert in to system settings
      INSERT INTO sunbird.system_settings (id,field,value) values ('custodianOrgId','custodianOrgId','1234567890');
      INSERT INTO sunbird.system_settings (id,field,value) values ('custodianOrgChannel','custodianOrgChannel','1234567890');

</code>
</pre>

<h3 id="knong-migration">Knong migration</h3>

<pre>
  <code>   set or export postgres variables
   export PG_HOST="postgres ip"         
   export PG_USER="postgres"                    
   export PGPASSWORD="pgpassword"   #  copy value from core_vault_postgres_password variable       
   export PG_DB="kong db name"   # by default db name will be api_manager_, verify in postgres database for knong db name              
   
   docker run --name kong-migration \
   -e ""KONG_DATABASE=postgres"" \
   -e ""KONG_PG_DATABASE=$PG_DB"" \
   -e ""KONG_PG_HOST=$PG_HOST"" \
   -e ""KONG_PG_PASSWORD=$PGPASSWORD"" \
   -e ""KONG_PG_USER=$PG_USER"" \
   -e ""KONG_PROXY_ACCESS_LOG=/dev/stdout"" \
   -e ""KONG_ADMIN_ACCESS_LOG=/dev/stdout"" \
   -e ""KONG_PROXY_ERROR_LOG=/dev/stderr"" \
   -e ""KONG_ADMIN_ERROR_LOG=/dev/stderr"" \
   -e ""KONG_ADMIN_LISTEN=0.0.0.0:8001"" \
   -p 8000:8000 \
   -p 8001:8001 \
   kong:0.14.1 kong migrations up --vv

</code>
</pre>

<h3 id="create-master-category">Create master category</h3>

<p>1.login to taxonomy service container and execute the curl commands to create master category. curl commands are availabe in the file <a href="https://github.com/project-sunbird/knowledge-platform/blob/release-3.4.0/definition-scripts/master_category_create">master_category_create</a></p>

<p>2.Replace the host to http://localhost:9000 while running</p>

<p>3.Run other defintion scripts from taxonomy service <a href="https://github.com/project-sunbird/knowledge-platform/tree/release-3.4.0/definition-scripts">definition-scripts</a> Since master_category_create is already ran do not run again.</p>

          
          <hr />
          
          <p class="edit-para text-right">
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/edit/3.8.0/developer-docs/server-installation/core-services.md" title="Fix this page">
				<i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit</a> |
			<a target="_blank" href="https://github.com/project-sunbird/sunbird.org-docs/issues" title="Report issue">
				<i class="fa fa-exclamation-circle" aria-hidden="true"></i> Report</a>
		  </p>
		  <a href="developer-docs/server-installation/core-services/#heading" class="scrollup"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></a>
          
      </div>
    </div>
    <div class="page-footer">
		<footer class="footer">
	<div class="footer__top">
		<div class="container">
			<div class="row">
				
			<div class="col-md-4 col-sm-12">
			</div>
			
			<div class="col-md-2 col-sm-6 ">
				<ul>
					<li><a href="http://www.sunbird.org/about/" target="_blank">About Sunbird</a></li>
					<li><a href="http://www.sunbird.org/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div>
			
			<div class="col-md-2 col-sm-6 sideline">
				<ul>
					<li><a href="http://www.sunbird.org/privacy-policy/" target="_blank">Privacy Policy</a></li>
					<li><a href="http://www.sunbird.org/features/" target="_blank">Microservices</a></li>
				</ul>
			</div>

			<div class="col-md-2 col-sm-12">
			</div>
			
		</div>
	</div>
</footer>
 

	</div>
  </div>
  <script type="text/javascript">
	//TOC Toggle
    $(function() {
        $.toc.clickHideButton();
    });
    //Scroll to top
    $(document).ready(function () {
		$(".content").scroll(function () {
			if ($(this).scrollTop() > 250) {
				$('.scrollup').fadeIn();
			} else {
				$('.scrollup').fadeOut();
			}
		});
	});
	$('#toc a').each(function(){
		var url = this.href.replace(baseURL.href, "");
		this.href = 'developer-docs/server-installation/core-services/' + url;
    })
	$(".zoomcover").click(function(){
		if (!$(this).hasClass("fullscreen")){
			$(this).addClass("fullscreen");
			$(this).find(".zoom").addClass("enabled").elevateZoom({
				zoomType: "inner",
				cursor  : "crosshair",
				scrollZoom: "true"
			});
		} else {
			$(this).removeClass("fullscreen");
			$(this).find(".zoom").removeClass("enabled");
			$(".zoomContainer").hide();
		}
	});
	$(document).keyup(function(e) {
     if (e.keyCode == 27) { 
		$(".zoomcover").removeClass("fullscreen");
		$(".zoomcover").find(".zoom").removeClass("enabled");
		$(".zoomContainer").hide();
    }
});
  </script>
  <style>
  .zoom:hover{
	cursor:url(/img/zoom.png),crosshair;
  }
  .zoomWindowContainer:hover div{
	cursor:url(/img/scroll.png),crosshair !important;
	height:15px;
	width:15px;
  }
  </style>
  <div id="templates"></div>
  </body>
</html>
